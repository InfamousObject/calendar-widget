(()=>{"use strict";var e={n:o=>{var r=o&&o.__esModule?()=>o.default:()=>o;return e.d(r,{a:r}),r},d:(o,r)=>{for(var t in r)e.o(r,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:r[t]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o)};const o=window.wp.blocks,r=window.wp.blockEditor,t=window.wp.components,n=window.wp.element,l=window.wp.i18n,i=window.wp.apiFetch;var s=e.n(i);const a=window.ReactJSXRuntime;(0,o.registerBlockType)("kentroi/booking",{edit:function({attributes:e,setAttributes:o}){const{mode:i,appointmentType:p,height:d,autoresize:u,buttonText:_,buttonAlign:f,buttonSize:w,buttonColor:c,modalSize:g}=e,b=(0,r.useBlockProps)(),[k,m]=(0,n.useState)([]),[h,x]=(0,n.useState)(!0),[v,j]=(0,n.useState)(null);(0,n.useEffect)(()=>{s()({path:"/kentroi/v1/features"}).then(e=>{e.success&&e.data?.appointmentTypes&&m(e.data.appointmentTypes),x(!1)}).catch(e=>{j(e.message||(0,l.__)("Failed to load","kentroi-for-wordpress")),x(!1)})},[]);const y=[{label:(0,l.__)("All Types","kentroi-for-wordpress"),value:""},...k.map(e=>({label:e.name,value:e.id}))],C=[{label:(0,l.__)("Inline (embedded on page)","kentroi-for-wordpress"),value:"inline"},{label:(0,l.__)("Popup (button opens modal)","kentroi-for-wordpress"),value:"popup"},{label:(0,l.__)("Link (button opens new tab)","kentroi-for-wordpress"),value:"link"}],S=[{label:(0,l.__)("Small (400px)","kentroi-for-wordpress"),value:"small"},{label:(0,l.__)("Medium (500px)","kentroi-for-wordpress"),value:"medium"},{label:(0,l.__)("Large (600px)","kentroi-for-wordpress"),value:"large"},{label:(0,l.__)("Full Width","kentroi-for-wordpress"),value:"full"}],B="inline"===i,T="popup"===i;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.InspectorControls,{children:[(0,a.jsxs)(t.PanelBody,{title:(0,l.__)("Display Settings","kentroi-for-wordpress"),children:[(0,a.jsx)(t.SelectControl,{label:(0,l.__)("Display Mode","kentroi-for-wordpress"),value:i,options:C,onChange:e=>o({mode:e}),help:"inline"===i?(0,l.__)("Widget is embedded directly on the page.","kentroi-for-wordpress"):"popup"===i?(0,l.__)("Shows a button that opens the booking form in a modal overlay.","kentroi-for-wordpress"):(0,l.__)("Shows a button that opens the booking page in a new tab.","kentroi-for-wordpress")}),B&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.ToggleControl,{label:(0,l.__)("Auto-resize","kentroi-for-wordpress"),checked:u,onChange:e=>o({autoresize:e}),help:(0,l.__)("Automatically adjust height to fit content. Prevents scrolling inside the widget.","kentroi-for-wordpress")}),(0,a.jsx)(t.RangeControl,{label:u?(0,l.__)("Minimum Height (pixels)","kentroi-for-wordpress"):(0,l.__)("Height (pixels)","kentroi-for-wordpress"),value:d,onChange:e=>o({height:e}),min:300,max:1200,step:50})]}),T&&(0,a.jsx)(t.SelectControl,{label:(0,l.__)("Modal Size","kentroi-for-wordpress"),value:g,options:S,onChange:e=>o({modalSize:e})})]}),!B&&(0,a.jsxs)(t.PanelBody,{title:(0,l.__)("Button Settings","kentroi-for-wordpress"),children:[(0,a.jsx)(t.TextControl,{label:(0,l.__)("Button Text","kentroi-for-wordpress"),value:_,onChange:e=>o({buttonText:e})}),(0,a.jsxs)(t.__experimentalToggleGroupControl,{label:(0,l.__)("Alignment","kentroi-for-wordpress"),value:f,onChange:e=>o({buttonAlign:e}),isBlock:!0,children:[(0,a.jsx)(t.__experimentalToggleGroupControlOption,{value:"left",label:(0,l.__)("Left","kentroi-for-wordpress")}),(0,a.jsx)(t.__experimentalToggleGroupControlOption,{value:"center",label:(0,l.__)("Center","kentroi-for-wordpress")}),(0,a.jsx)(t.__experimentalToggleGroupControlOption,{value:"right",label:(0,l.__)("Right","kentroi-for-wordpress")})]}),(0,a.jsx)(t.SelectControl,{label:(0,l.__)("Button Size","kentroi-for-wordpress"),value:w,options:[{label:(0,l.__)("Small","kentroi-for-wordpress"),value:"small"},{label:(0,l.__)("Medium","kentroi-for-wordpress"),value:"medium"},{label:(0,l.__)("Large","kentroi-for-wordpress"),value:"large"}],onChange:e=>o({buttonSize:e})}),(0,a.jsxs)("div",{style:{marginTop:"16px"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:(0,l.__)("Button Color","kentroi-for-wordpress")}),(0,a.jsx)(t.ColorPalette,{colors:[{name:"Blue",color:"#3b82f6"},{name:"Green",color:"#22c55e"},{name:"Purple",color:"#8b5cf6"},{name:"Red",color:"#ef4444"},{name:"Orange",color:"#f97316"},{name:"Gray",color:"#6b7280"},{name:"Black",color:"#1f2937"}],value:c,onChange:e=>o({buttonColor:e||"#3b82f6"})})]})]}),(0,a.jsx)(t.PanelBody,{title:(0,l.__)("Booking Settings","kentroi-for-wordpress"),initialOpen:!1,children:!h&&!v&&(0,a.jsx)(t.SelectControl,{label:(0,l.__)("Appointment Type","kentroi-for-wordpress"),value:p,options:y,onChange:e=>o({appointmentType:e}),help:(0,l.__)("Pre-select a specific appointment type or show all.","kentroi-for-wordpress")})})]}),(0,a.jsx)("div",{...b,children:(0,a.jsxs)(t.Placeholder,{icon:"calendar-alt",label:(0,l.__)("Kentroi Booking","kentroi-for-wordpress"),instructions:h?(0,l.__)("Loading...","kentroi-for-wordpress"):"popup"===i?(0,l.__)("Button will open booking in a popup modal","kentroi-for-wordpress"):"link"===i?(0,l.__)("Button will open booking in a new tab","kentroi-for-wordpress"):(0,l.__)("Booking widget will display here","kentroi-for-wordpress"),children:[h&&(0,a.jsx)(t.Spinner,{}),!h&&!B&&(0,a.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:{left:"flex-start",center:"center",right:"flex-end"}[f]||"flex-start"},children:(0,a.jsx)("div",{style:{display:"inline-block",...{small:{padding:"8px 16px",fontSize:"14px"},medium:{padding:"12px 24px",fontSize:"16px"},large:{padding:"16px 32px",fontSize:"18px"}}[w],background:c||"#3b82f6",color:"#fff",borderRadius:"8px",fontWeight:"500"},children:_||(0,l.__)("Book Appointment","kentroi-for-wordpress")})})]})})]})}})})();